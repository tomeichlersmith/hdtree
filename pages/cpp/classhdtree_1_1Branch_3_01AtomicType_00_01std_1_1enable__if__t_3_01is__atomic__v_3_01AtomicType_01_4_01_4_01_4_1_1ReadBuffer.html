---
sidebar: cpp_sidebar.html
---
<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HDTree: hdtree::Branch&lt; AtomicType, std::enable_if_t&lt; is_atomic_v&lt; AtomicType &gt; &gt; &gt;::ReadBuffer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HDTree
   </div>
   <div id="projectbrief">HDTree C++ API</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacehdtree.html">hdtree</a></li><li class="navelem"><a class="el" href="classhdtree_1_1Branch_3_01AtomicType_00_01std_1_1enable__if__t_3_01is__atomic__v_3_01AtomicType_01_4_01_4_01_4.html">Branch&lt; AtomicType, std::enable_if_t&lt; is_atomic_v&lt; AtomicType &gt; &gt; &gt;</a></li><li class="navelem"><a class="el" href="classhdtree_1_1Branch_3_01AtomicType_00_01std_1_1enable__if__t_3_01is__atomic__v_3_01AtomicType_01_4_01_4_01_4_1_1ReadBuffer.html">ReadBuffer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classhdtree_1_1Branch_3_01AtomicType_00_01std_1_1enable__if__t_3_01is__atomic__v_3_01AtomicType_0e782b7b94d89a2e266d0aa53abdb143.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">hdtree::Branch&lt; AtomicType, std::enable_if_t&lt; is_atomic_v&lt; AtomicType &gt; &gt; &gt;::ReadBuffer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for hdtree::Branch&lt; AtomicType, std::enable_if_t&lt; is_atomic_v&lt; AtomicType &gt; &gt; &gt;::ReadBuffer:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classhdtree_1_1Branch_3_01AtomicType_00_01std_1_1enable__if__t_3_01is__atomic__v_3_01AtomicType_4a95fac2ec96a58723d66dc23f3cf2b3.svg" width="296" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab3b9b90c493ea02e6aa6b935e1065d88"><td class="memItemLeft" align="right" valign="top"><a id="ab3b9b90c493ea02e6aa6b935e1065d88"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ReadBuffer</b> (<a class="elRef" href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a> max, HighFive::DataSet s)</td></tr>
<tr class="separator:ab3b9b90c493ea02e6aa6b935e1065d88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bb3ab2f392c45c09f290dc5fb1e7faa"><td class="memItemLeft" align="right" valign="top"><a id="a9bb3ab2f392c45c09f290dc5fb1e7faa"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>read</b> (AtomicType &amp;v)</td></tr>
<tr class="separator:a9bb3ab2f392c45c09f290dc5fb1e7faa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ac1f016a73ed9323bd1e005c7de03d8b3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhdtree_1_1Branch_3_01AtomicType_00_01std_1_1enable__if__t_3_01is__atomic__v_3_01AtomicType_01_4_01_4_01_4_1_1ReadBuffer.html#ac1f016a73ed9323bd1e005c7de03d8b3">read_chunk_from_disk</a> ()</td></tr>
<tr class="memdesc:ac1f016a73ed9323bd1e005c7de03d8b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load the next chunk of data into memory.  <a href="classhdtree_1_1Branch_3_01AtomicType_00_01std_1_1enable__if__t_3_01is__atomic__v_3_01AtomicType_01_4_01_4_01_4_1_1ReadBuffer.html#ac1f016a73ed9323bd1e005c7de03d8b3">More...</a><br /></td></tr>
<tr class="separator:ac1f016a73ed9323bd1e005c7de03d8b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a81a87221906220b50d660da3a0a6d7ba"><td class="memItemLeft" align="right" valign="top"><a id="a81a87221906220b50d660da3a0a6d7ba"></a>
<a class="elRef" href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>max_len_</b></td></tr>
<tr class="separator:a81a87221906220b50d660da3a0a6d7ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab5e0b8eed8e2d7cb469e5872593c787"><td class="memItemLeft" align="right" valign="top"><a id="aab5e0b8eed8e2d7cb469e5872593c787"></a>
HighFive::DataSet&#160;</td><td class="memItemRight" valign="bottom"><b>set_</b></td></tr>
<tr class="separator:aab5e0b8eed8e2d7cb469e5872593c787"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee4e05e9b419e5f3f5b4eb05a19b5a7d"><td class="memItemLeft" align="right" valign="top"><a id="aee4e05e9b419e5f3f5b4eb05a19b5a7d"></a>
<a class="elRef" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector</a>&lt; AtomicType &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>buffer_</b></td></tr>
<tr class="separator:aee4e05e9b419e5f3f5b4eb05a19b5a7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe6cdd495ddb043d66f1adc4bb5a317c"><td class="memItemLeft" align="right" valign="top"><a id="abe6cdd495ddb043d66f1adc4bb5a317c"></a>
<a class="elRef" href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>i_file_</b></td></tr>
<tr class="separator:abe6cdd495ddb043d66f1adc4bb5a317c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87bcf54d0d6a6c360b067e8881ee1111"><td class="memItemLeft" align="right" valign="top"><a id="a87bcf54d0d6a6c360b067e8881ee1111"></a>
<a class="elRef" href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>i_memory_</b></td></tr>
<tr class="separator:a87bcf54d0d6a6c360b067e8881ee1111"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0bf17def3136f6ede626d6972c0decc"><td class="memItemLeft" align="right" valign="top"><a id="ab0bf17def3136f6ede626d6972c0decc"></a>
<a class="elRef" href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>entries_</b></td></tr>
<tr class="separator:ab0bf17def3136f6ede626d6972c0decc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ac1f016a73ed9323bd1e005c7de03d8b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1f016a73ed9323bd1e005c7de03d8b3">&#9670;&nbsp;</a></span>read_chunk_from_disk()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename AtomicType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classhdtree_1_1Branch.html">hdtree::Branch</a>&lt; AtomicType, std::enable_if_t&lt; <a class="el" href="namespacehdtree.html#abc2610fb76593b1d6a9c4106532df50c">is_atomic_v</a>&lt; AtomicType &gt; &gt; &gt;::ReadBuffer::read_chunk_from_disk </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load the next chunk of data into memory. </p>
<p>We determine the size of the next chunk from our own maximum and the number of entries in the data set. We shrink the size of the next chunk depending on how many entries are left if we can't grab a whole maximum sized chunk.</p>
<p>We have a compile-time split in order to patch <a href="https://github.com/BlueBrain/HighFive/issues/490">a bug</a> in HighFive that doesn't allow writing of std::vector&lt;bool&gt; due to the specialization of it <b>and</b> to translate our custom enum <a class="el" href="namespacehdtree.html#af9d90f959db429ac7ca716e46a099c63" title="Boolean enum aligned with h5py.">hdtree::Bool</a> into bools.</p>
<p>After reading the next chunk into memory, we update our indicies by resetting the in-memory index to 0 and moving the file index by the size of the buffer.</p>
<dl class="section note"><dt>Note</dt><dd>We assume that the downstream objects using this buffer know to stop processing before attempting to read passed the end of the data set. We enforce this with an assertion. </dd></dl>
<p>compile-time split for bools which</p><ol type="1">
<li>gets around the std::vector&lt;bool&gt; specialization</li>
<li>allows us to translate io::Bool into bools</li>
</ol>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/hdtree/branch/<a class="el" href="AtomicBranch_8h_source.html">AtomicBranch.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
