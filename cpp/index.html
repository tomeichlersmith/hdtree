---
title: hdtree-cpp
layout: default
hide_sidebar: yes
sidebar: cpp_sidebar.html
---
<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HDTree: hdtree-cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">hdtree-cpp </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_cpp_README"></a>C++ API for the HDTree data organization structure.</p>
<p>hdtree-cpp is a C++17 library with support for</p><ul>
<li>serial read/write of an HDTree</li>
<li>schema evolution of user-defined structures stored in branches of the HDTree</li>
</ul>
<h1><a class="anchor" id="autotoc_md1"></a>
Installation</h1>
<h2><a class="anchor" id="autotoc_md2"></a>
Depedencies</h2>
<ul>
<li>HDF5</li>
<li>HighFive</li>
<li>Boost (for demangling, plans to make optional)</li>
</ul>
<div class="fragment"><div class="line">cmake -B build -S . \</div>
<div class="line">  -DCMAKE_BUILD_TYPE=Release \</div>
<div class="line">  -DCMAKE_INSTALL_PREFIX=&lt;prefix&gt;</div>
<div class="line">cmake --build build --target test</div>
<div class="line">cmake --build build --target install</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3"></a>
Usage</h1>
<p><b>only the goal at the moment</b> </p><div class="fragment"><div class="line">{ <span class="comment">// write</span></div>
<div class="line">  <span class="keyword">auto</span> tree = <a class="code" href="classhdtree_1_1Tree.html#a792d81b2225129bebd6ba38710264ae6">hdtree::Tree::save</a>(<span class="stringliteral">&quot;my-file.hdf5&quot;</span>,<span class="stringliteral">&quot;/path/to/tree&quot;</span>);</div>
<div class="line">  <span class="keyword">auto</span>&amp; i_entry = tree.branch&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;i_entry&quot;</span>);</div>
<div class="line">  <span class="keywordflow">for</span> (std::size_t i{0}; i &lt; 5; i++) {</div>
<div class="line">    *i_entry = i;</div>
<div class="line">    <span class="comment">// same as</span></div>
<div class="line">    <span class="comment">//i_entry.update(i);</span></div>
<div class="line">    tree.save();</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">{ <span class="comment">// read</span></div>
<div class="line">  <span class="keyword">auto</span> tree = <a class="code" href="classhdtree_1_1Tree.html#a358af0af65a1905c5975238d59d9d979">hdtree::Tree::load</a>(<span class="stringliteral">&quot;my-file.hdf5&quot;</span>,<span class="stringliteral">&quot;/path/to/tree&quot;</span>);</div>
<div class="line">  <span class="comment">// &amp; required</span></div>
<div class="line">  <span class="keyword">auto</span>&amp; i_entry = tree.get&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;i_entry&quot;</span>);</div>
<div class="line">  <span class="keywordflow">for</span> (std::size_t i{0}; i &lt; r.entries(); i++) {</div>
<div class="line">    tree.load();</div>
<div class="line">    assert(i == *i_entry);</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">{ <span class="comment">// read and write (separate source/dest)</span></div>
<div class="line">  <span class="keyword">auto</span> tree = hdtree::Tree::transform(<span class="stringliteral">&quot;one.hdf5&quot;</span>,<span class="stringliteral">&quot;/tree1&quot;</span>,<span class="stringliteral">&quot;two.hdf5&quot;</span>,<span class="stringliteral">&quot;/tree2&quot;</span>);</div>
<div class="line">  <span class="comment">// read this branch</span></div>
<div class="line">  <span class="keyword">auto</span>&amp; i_entry = tree.get&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;i_entry&quot;</span>);</div>
<div class="line">  <span class="comment">// write this branch</span></div>
<div class="line">  <span class="keyword">auto</span>&amp; my_cool_new_var = tree.branch&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;coolio&quot;</span>);</div>
<div class="line">  <span class="keywordflow">for</span> (std::size_t i{0}; i &lt; tree.entries(); i++) {</div>
<div class="line">    tree.load();</div>
<div class="line">    </div>
<div class="line">    *my_cool_new_var = i_entry*4.2;    </div>
<div class="line"> </div>
<div class="line">    tree.save();</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">{ <span class="comment">// read and write (same source/dest)</span></div>
<div class="line">  <span class="keyword">auto</span> tree = hdtree::Tree::inplace(<span class="stringliteral">&quot;one.hdf5&quot;</span>,<span class="stringliteral">&quot;/tree1&quot;</span>);</div>
<div class="line">  <span class="comment">// read this branch</span></div>
<div class="line">  <span class="keyword">auto</span>&amp; i_entry = tree.get&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;i_entry&quot;</span>);</div>
<div class="line">  <span class="comment">// write this branch</span></div>
<div class="line">  <span class="keyword">auto</span>&amp; my_cool_new_var = tree.branch&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;coolio&quot;</span>);</div>
<div class="line">  <span class="keywordflow">for</span> (std::size_t i{0}; i &lt; tree.entries(); i++) {</div>
<div class="line">    tree.load();</div>
<div class="line">    </div>
<div class="line">    *my_cool_new_var = i_entry*4.2;    </div>
<div class="line"> </div>
<div class="line">    tree.save();</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="ttc" id="aclasshdtree_1_1Tree_html_a358af0af65a1905c5975238d59d9d979"><div class="ttname"><a href="classhdtree_1_1Tree.html#a358af0af65a1905c5975238d59d9d979">hdtree::Tree::load</a></div><div class="ttdeci">void load()</div><div class="ttdoc">start-of-event call back</div><div class="ttdef"><b>Definition:</b> Tree.cxx:35</div></div>
<div class="ttc" id="aclasshdtree_1_1Tree_html_a792d81b2225129bebd6ba38710264ae6"><div class="ttname"><a href="classhdtree_1_1Tree.html#a792d81b2225129bebd6ba38710264ae6">hdtree::Tree::save</a></div><div class="ttdeci">void save()</div><div class="ttdoc">end-of-event call back</div><div class="ttdef"><b>Definition:</b> Tree.cxx:27</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md4"></a>
Benefits</h1>
<ul>
<li>resets value in a Branch to a empty state after each <code>save</code> (i.e. treat the Branch reference as a for-loop-local variable)</li>
<li>hdtree juggles the memory addresses</li>
</ul>
<h1><a class="anchor" id="autotoc_md5"></a>
Table of Contents</h1>
<ul>
<li>include: the headers for the HDTree C++ API</li>
<li>src: source files compiled into the hdtree-cpp library</li>
<li>test: source files for testing hdtree-cpp</li>
<li>examples: simple, example programs showing hdtree-cpp's various abilities<ul>
<li>compilation and running of examples are included <em>always</em> included in the build so that developers of hdtree-cpp can keep them up-to-date </li>
</ul>
</li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
